# ============================================================================ #
#
# Provides `test' and `check' targets.
#
# NOTE: `TEST_template' is defined by `./lib.mk' and processed
#       by `./gen-targets.mk'.
#
#
# ---------------------------------------------------------------------------- #

ifndef _MK_CHECK

_MK_CHECK = 1

# ---------------------------------------------------------------------------- #

.PHONY: tests check


# ---------------------------------------------------------------------------- #

TEST ?= test


# ---------------------------------------------------------------------------- #

check_TARGETS ::=


# ---------------------------------------------------------------------------- #

check: $(check_TARGETS) FORCE
	for c in $(check_TARGETS); do                \
	  if ! $(TEST) -e "$$c"; then continue; fi;  \
	  if "$$c"; then                             \
	    echo "PASS: $$c" >&2;                    \
	  else                                       \
	    echo "FAIL: $$c" >&2;                    \
	  fi;                                        \
	done


# ---------------------------------------------------------------------------- #

endif  # ifndef _MK_CHECK


# ---------------------------------------------------------------------------- #
#
#
#
# ============================================================================ #
