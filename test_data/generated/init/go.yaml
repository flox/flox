when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"go","install_id":"go","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"],"version":"^1.21.0"}],"name":"go"}]}'
then:
  status: 200
  header:
  - name: date
    value: Sun, 28 Dec 2025 12:24:13 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3233'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: WTIpNhnBIAMEa4w=
  body: '{"items":[{"name":"go","page":{"page":916364,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/sn3j8a68h7icr6mwchbvl10gr3a5y5sz-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/52f5kjcmgmvgrz3rij676b3rjmgg5l5g-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:02:31.512535Z","cache_uri":null,"install_id":"go"},{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/n7i6i8mi1n086fvdj6ln4yzkzhc4lfp5-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/2ajrlmz1qdpm9k9ankhnp3973wxg1gqs-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:18:53.582804Z","cache_uri":null,"install_id":"go"},{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/qivzbrqalppn7xmyh1v5cimy6acfxxpi-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/1rqpvp45rl4sr1l0czrlbmv8jqj9sa7r-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:34:57.925372Z","cache_uri":null,"install_id":"go"},{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/wvxcldq04svn1f0wz5548afkbi8cnlrp-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/0a3dyfq09dnkw28ap2i450wjimvdmv6s-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:51:09.725786Z","cache_uri":null,"install_id":"go"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
---
when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"go","install_id":"go","systems":["aarch64-darwin"],"version":"^1.21.0"},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"go","install_id":"go","systems":["aarch64-linux"],"version":"^1.21.0"},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"go","install_id":"go","systems":["x86_64-darwin"],"version":"^1.21.0"},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"go","install_id":"go","systems":["x86_64-linux"],"version":"^1.21.0"}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Sun, 28 Dec 2025 12:24:14 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3239'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: WTIpSj7mIAMEa5g=
  body: '{"items":[{"name":"toplevel","page":{"page":916364,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/sn3j8a68h7icr6mwchbvl10gr3a5y5sz-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/52f5kjcmgmvgrz3rij676b3rjmgg5l5g-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:02:31.512535Z","cache_uri":null,"install_id":"go"},{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/n7i6i8mi1n086fvdj6ln4yzkzhc4lfp5-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/2ajrlmz1qdpm9k9ankhnp3973wxg1gqs-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:18:53.582804Z","cache_uri":null,"install_id":"go"},{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/qivzbrqalppn7xmyh1v5cimy6acfxxpi-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/1rqpvp45rl4sr1l0czrlbmv8jqj9sa7r-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:34:57.925372Z","cache_uri":null,"install_id":"go"},{"catalog":"nixpkgs","attr_path":"go","pkg_path":"go","derivation":"/nix/store/wvxcldq04svn1f0wz5548afkbi8cnlrp-go-1.25.4.drv","name":"go-1.25.4","pname":"go","version":"1.25.4","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/0a3dyfq09dnkw28ap2i450wjimvdmv6s-go-1.25.4"}],"outputs_to_install":["out"],"description":"Go Programming language","license":"BSD-3-Clause","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:51:09.725786Z","cache_uri":null,"install_id":"go"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
