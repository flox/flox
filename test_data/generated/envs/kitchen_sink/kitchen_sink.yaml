when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Fri, 07 Nov 2025 21:38:03 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3411'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: TsT9WhPpoAMEVFQ=
  body: '{"items":[{"name":"toplevel","page":{"page":888552,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/rqc4x5r3dsaxxagybrffkmmih9537300-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/0kih8j1k3bc422xig86j4dlxkpf4a5b1-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev":"b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev_count":888552,"rev_date":"2025-11-02T19:18:41Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-11-04T00:35:31.904974Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/dz4kii8l3h3f02nfvg0fiasigdgyswl2-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/abq6r5qjr7hrfg9gsbjb154cpi7z1lf0-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev":"b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev_count":888552,"rev_date":"2025-11-02T19:18:41Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-11-05T16:29:15.122606Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/m0ric77mpv188yda5j1zmi7iaxpvr8cq-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/d2n8x3l65fisynqbbvdhws4q0wwdkrs2-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev":"b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev_count":888552,"rev_date":"2025-11-02T19:18:41Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-11-05T16:55:11.841242Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/dzgpbp0vp7lj7lgj26rjgmnjicq2wf4k-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/sqw9kyl8zrfnkklb3vp6gji9jw9qfgb5-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev":"b3d51a0365f6695e7dd5cdf3e180604530ed33b4","rev_count":888552,"rev_date":"2025-11-02T19:18:41Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-11-05T17:21:05.601161Z","cache_uri":null,"install_id":"hello"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
