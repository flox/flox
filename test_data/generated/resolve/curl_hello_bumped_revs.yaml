when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
    - name: date
      value: Wed, 30 Jul 2025 17:02:51 GMT
    - name: content-type
      value: application/json
    - name: server
      value: uvicorn
    - name: apigw-requestid
      value: OiF5QgIcoAMEV_g=
  body: '{"items":[{"name":"toplevel","page":{"page":836326,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/x7lvd7kjqhn9gcvv8x9pqcaig1ijqks9-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"aarch64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/imspxq4rizhk2lpv3a25ngm2lmcc35p4-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/q9m2lbh8v0zqpb8av029ph7zn63gs9jd-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/qvxv8a6bhj6b3r3d3zxax8ksk7gx42k0-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/8b6q78qwjn07zy4i5pxfbsfq50prgkfp-curl-8.14.1"},{"name":"devdoc","store_path":"/nix/store/knz60qb7akg16z3zc4ya4j74nnh4d41z-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T00:28:05.092676Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/khbwr26zzkxs82msbvfdx6xc07p11ima-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"aarch64-linux","outputs":[{"name":"bin","store_path":"/nix/store/xjyd8czibdxvwqyh7ybnh300cykzis3g-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/fzy5wbav5r78alzhsalh4bnp1wdwsd4h-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/h97kdc67n02xx4ij47gh448knfxrxkyr-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/7zlkjxk4n4n2mch4ssblql8855gqnzqv-curl-8.14.1"},{"name":"debug","store_path":"/nix/store/qls3y5lyqnzgqi19w0vhsg7fsw4p7slw-curl-8.14.1-debug"},{"name":"devdoc","store_path":"/nix/store/j7jilzkvpzg8iz4lhpb0zjnv4gn58n47-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T00:47:40.741082Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/k7dbs26bk00cs8bvkfa37czmdpsxm6xn-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"x86_64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/a2a99s8h5jjfzx8704awj9110kvslzp1-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/688vl41z3mqnfx0r9y4pm3p8hphq5cw8-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/yq9vks1sd1q6xk2w18h8mwm679v8c00c-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/w5aw4lds1xyg4hi1k5dk43bwhrfw5061-curl-8.14.1"},{"name":"devdoc","store_path":"/nix/store/zjrh5iz7a0gg20jxc8hwlcsxijh03n9p-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T01:07:25.398979Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/1ircj3gv1w0mz5q2n7y0bdbcywj4263b-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"x86_64-linux","outputs":[{"name":"bin","store_path":"/nix/store/z1l1b9bdzk6yspdf53z90n2dv311g1r6-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/912hlbqiabfk5xy0ajla6z9dwzlwkn87-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/zv6lnrb8hladdc91y0v4mazi0sxwmzq2-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/95iy4kvy1xllg2fpb14dhw4m3ff3l0f0-curl-8.14.1"},{"name":"debug","store_path":"/nix/store/q116b51lfnj36r2cyfhrjad7lr6kydx8-curl-8.14.1-debug"},{"name":"devdoc","store_path":"/nix/store/lrnviaphs4pf2cy3625d0vp94c4pzbpm-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command
    line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T01:31:20.645719Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/db60vwx756bx1cig8ry5j0kxx6jl9jjb-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/wavwxbxl8szlf2cl40bvlvq551sw08s0-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T00:28:05.829133Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/y7apf9pnw8snbvyxqcprhc10ydlzsggl-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/63yqdabhapbpv96h625l550xybjhw9kx-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T00:47:42.315663Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/5pb5mpkdbk1yp70as187fydi36l4ixr2-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/sx6ihl7jw3lzx27a6p66a095kpkbk9m7-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T01:07:26.183302Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/5g60vyp4cbgwl12pav5apyi571smp62s-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/wvfhs8k86740b7j3h1iss94z7cb0ggj1-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program
    that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=dc9637876d0dcc8c9e5e22986b857632deadbeef","rev":"dc9637876d0dcc8c9e5e22986b857632deadbeef","rev_count":836326,"rev_date":"2025-07-28T09:26:29Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-07-30T01:31:22.389647Z","cache_uri":null,"install_id":"hello"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
