when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-linux"]}],"name":"not-toplevel"},{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Wed, 02 Jul 2025 12:33:48 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '8435'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: NFMO6ikZoAMEb2g=
  body: '{"items":[{"name":"not-toplevel","page":{"page":822156,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/2pgbzwl9pq3cf0h5p8dg9qhk9csp1vg6-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"aarch64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/bblr8ccnd4baxm4cf7g1igfz6ya8v93m-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/lndw3l3wysa47f7lvp1bnli6v7wmg0kn-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/1irgfwdklya00kh0bs1jp2fbdwqw4a1d-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/6l3i3d58xr1r4qv49v1ln8wf309sb15x-curl-8.14.1"},{"name":"devdoc","store_path":"/nix/store/k8q6sgq3sbbrwmvn56a63njpnxf3q9cq-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T04:56:14.005073Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/1v22x99f9la7d330r1d4q5dzrkl9v5fl-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"aarch64-linux","outputs":[{"name":"bin","store_path":"/nix/store/d832wkj3pk16dz3qg85fcpf0j68hc2sz-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/v11930kwfac9179h4w62vqj9jy6mx376-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/1grssrnbhxd6c4blrj1fxvx5y5vxqib5-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/14ywix384x8np6njf8miimc3yyqn78bc-curl-8.14.1"},{"name":"debug","store_path":"/nix/store/nzk3k15xfprkqcj46n9i85f0k6aqc0wp-curl-8.14.1-debug"},{"name":"devdoc","store_path":"/nix/store/25nv179scwrksi4gpmh943pncrydq29b-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T05:19:53.866845Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/w737aiiwfqlarw7742gm0l583fc008gr-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"x86_64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/1dsmzm93zn64vgb9s7w9p69vfib3z8kj-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/ppq8fii35rf5nb6sh4dagp5r82x942xz-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/8qjwrjkkjsvgly8f14jyrkz7ddf4nr2l-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/223wn8gbj05wdri7b7vwxr226w54rqlc-curl-8.14.1"},{"name":"devdoc","store_path":"/nix/store/m2q1qkll2nf1wgl9hawzirridxjh6ylm-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T05:38:12.616262Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/fran73vzvniw219iavb7lvrx060msnkr-curl-8.14.1.drv","name":"curl-8.14.1","pname":"curl","version":"8.14.1","system":"x86_64-linux","outputs":[{"name":"bin","store_path":"/nix/store/wq4mwdypl1wmlhyrr69wggv8jdn2h9j9-curl-8.14.1-bin"},{"name":"dev","store_path":"/nix/store/wznrhnlrvamvihizpnizjfh5hs55z98n-curl-8.14.1-dev"},{"name":"man","store_path":"/nix/store/ihal3azjw383i79xabnpm81dfhgkdh7r-curl-8.14.1-man"},{"name":"out","store_path":"/nix/store/frlckg2m2sf0gs8g5pqkryddbpy6qcz1-curl-8.14.1"},{"name":"debug","store_path":"/nix/store/mjsh6iphr6bc221g4965s93yv5ibdmbb-curl-8.14.1-debug"},{"name":"devdoc","store_path":"/nix/store/srw4yxmsb1l1k310bn7j0cg77vlrgh5z-curl-8.14.1-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T06:00:02.044423Z","cache_uri":null,"install_id":"curl"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]},{"name":"toplevel","page":{"page":822156,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/x6p76aiji2i202jdalv98ha8qkrqv9kv-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/nfp7i61i8nkmbfhhi3c1q1v0fp8crvnr-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T04:56:14.759995Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/1zp9chvsd06kqxlg4gplg7zba9p7zsid-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/014lppasqbc9xxwwq4xjp6z2rz96h13i-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T05:19:55.397790Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/43y5f2hqsnccc2f3ccinw3mix5v0kf3c-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/f0c0xnzcc2ik4mnxgkqcirr8cym5sh7m-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T05:38:13.380302Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/mih2cvl8za6pg9m7dn3m9aj2r63jbw1j-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/1apy255z15pclskgkzsbzldgdn87zbyr-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev":"30e2e2857ba47844aa71991daa6ed1fc678bcbb7","rev_count":822156,"rev_date":"2025-06-27T08:03:01Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-06-29T06:00:03.760736Z","cache_uri":null,"install_id":"hello"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
