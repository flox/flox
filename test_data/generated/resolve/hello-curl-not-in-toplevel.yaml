when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"curl","install_id":"curl","systems":["x86_64-linux"]}],"name":"not-toplevel"},{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello","install_id":"hello","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Sun, 28 Dec 2025 12:34:17 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '8557'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: WTKHliwUoAMEShg=
  body: '{"items":[{"name":"not-toplevel","page":{"page":916364,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/8s0mxz6a036qgvdgfc04995v120qig4l-curl-8.17.0.drv","name":"curl-8.17.0","pname":"curl","version":"8.17.0","system":"aarch64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/qfwqcndy8bji6xww0gizclf2nqi2qpph-curl-8.17.0-bin"},{"name":"dev","store_path":"/nix/store/ydp55g2mbd6rk6lfw0krkk3jwgdiqj5d-curl-8.17.0-dev"},{"name":"man","store_path":"/nix/store/rk815zvrhwzbi7c6d589v2mhxzyzb400-curl-8.17.0-man"},{"name":"out","store_path":"/nix/store/yxv8fxaz0fyhc31dv3rz89kc50zw5hgj-curl-8.17.0"},{"name":"devdoc","store_path":"/nix/store/8s884m82fmrbiyz8malglqc4sd632dkc-curl-8.17.0-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:02:30.767881Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/591mn5irfj561ca656r1llwnxwd83rcn-curl-8.17.0.drv","name":"curl-8.17.0","pname":"curl","version":"8.17.0","system":"aarch64-linux","outputs":[{"name":"bin","store_path":"/nix/store/4x19j6zihdl6pya63xs8g360f2r614sx-curl-8.17.0-bin"},{"name":"dev","store_path":"/nix/store/iqs9mjscns3h5npgkrhgr5xa7qzwd0si-curl-8.17.0-dev"},{"name":"man","store_path":"/nix/store/b29qbmbfvzkm34k0jnj8ykqg2gzj3rdy-curl-8.17.0-man"},{"name":"out","store_path":"/nix/store/b0a6qc92vybjiggh0kg387cg0zp3kl6j-curl-8.17.0"},{"name":"debug","store_path":"/nix/store/5hmbdk99knmbg8b0fzh96bv6bkcf6v5i-curl-8.17.0-debug"},{"name":"devdoc","store_path":"/nix/store/1fwncv08c8g78k3hj3cj375vx92ndrp8-curl-8.17.0-devdoc"}],"outputs_to_install":["bin","bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:18:52.054578Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/aw0j1jvwrhmcs8rkpva762ng2j8x5a8s-curl-8.17.0.drv","name":"curl-8.17.0","pname":"curl","version":"8.17.0","system":"x86_64-darwin","outputs":[{"name":"bin","store_path":"/nix/store/w2336wv560g1n58cwashmmczdn3bfkq1-curl-8.17.0-bin"},{"name":"dev","store_path":"/nix/store/39zfdgq9kg3mb4sycf8pj4pdssrzki6c-curl-8.17.0-dev"},{"name":"man","store_path":"/nix/store/i6xmhcan8g4abda7ivv20nvwxrsssjqj-curl-8.17.0-man"},{"name":"out","store_path":"/nix/store/x9gyg634fi8mgcyay9mqa1ral7xg72fm-curl-8.17.0"},{"name":"devdoc","store_path":"/nix/store/ipa7v9z7pjcnnv0fmdya1fldcxv0a28z-curl-8.17.0-devdoc"}],"outputs_to_install":["bin","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:34:57.146418Z","cache_uri":null,"install_id":"curl"},{"catalog":"nixpkgs","attr_path":"curl","pkg_path":"curl","derivation":"/nix/store/m8q2ly7pg59n7329vv6npbbvw1l2mvfg-curl-8.17.0.drv","name":"curl-8.17.0","pname":"curl","version":"8.17.0","system":"x86_64-linux","outputs":[{"name":"bin","store_path":"/nix/store/0rfz69vp1nl0q2hxzig20hc60sk72z62-curl-8.17.0-bin"},{"name":"dev","store_path":"/nix/store/ikmdk37frjdblkba3wl3xws2wwgln17x-curl-8.17.0-dev"},{"name":"man","store_path":"/nix/store/ijd0yybyzwm98d3q6x7a9cyixgxk0i5d-curl-8.17.0-man"},{"name":"out","store_path":"/nix/store/8idis3j5l13c3x74jl8xly0k4qyk9mx6-curl-8.17.0"},{"name":"debug","store_path":"/nix/store/h1fxw0xrifxvbhcp7b8hxsgirxxxfzav-curl-8.17.0-debug"},{"name":"devdoc","store_path":"/nix/store/jm6irg81cc0hqg43l39lkxr6pb0w2xk5-curl-8.17.0-devdoc"}],"outputs_to_install":["bin","bin","bin","bin","man","man","man","man"],"description":"Command line tool for transferring files with URL syntax","license":"curl","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:51:08.031269Z","cache_uri":null,"install_id":"curl"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]},{"name":"toplevel","page":{"page":916364,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/zrmsjw26i4kmqrl9aij1mznxjfw65j10-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/99qjarx4yjwh0ik9xl9idw0jd270l26m-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:02:44.406662Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/kx0vja16q5x7f2i5sdxbpkibrv89x87k-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/jrq3p609i85jsg27mr5zxm2imk3mjzyk-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:19:08.935816Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/bpj7vqhqb07b7ghk0qfq8ywfzq2waz04-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/7sby8nvkik7dyywdmlnn6wjw5zmfd0zq-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:35:11.193529Z","cache_uri":null,"install_id":"hello"},{"catalog":"nixpkgs","attr_path":"hello","pkg_path":"hello","derivation":"/nix/store/zvs7lrrhcqdk4cnhfr48ddypz32c8344-hello-2.12.2.drv","name":"hello-2.12.2","pname":"hello","version":"2.12.2","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/2bcv91i8fahqghn8dmyr791iaycbsjdd-hello-2.12.2"}],"outputs_to_install":["out"],"description":"Program that produces a familiar, friendly greeting","license":"GPL-3.0-or-later","locked_url":"https://github.com/flox/nixpkgs?rev=3e2499d5539c16d0d173ba53552a4ff8547f4539","rev":"3e2499d5539c16d0d173ba53552a4ff8547f4539","rev_count":916364,"rev_date":"2025-12-25T08:32:45Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-12-26T03:51:25.437014Z","cache_uri":null,"install_id":"hello"}],"messages":[],"complete":true},"candidate_pages":null,"messages":[]}]}'
