when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["aarch64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["aarch64-linux"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["x86_64-darwin"]},{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"hello-unfree","install_id":"hello-unfree","systems":["x86_64-linux"]}],"name":"toplevel"}]}'
then:
  status: 200
  header:
  - name: date
    value: Mon, 12 May 2025 14:55:13 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3600'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: KdbI1jygIAMESIQ=
  body: '{"items":[{"name":"toplevel","page":{"page":796699,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/8pdlqfmmf691w9n2mdbgxx7a2mhl4yvs-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/cqblmqh9s7s0s963wpglrip2xn6lnvnv-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["unstable"],"scrape_date":"2025-05-10T04:25:11.569323Z","cache_uri":null,"install_id":"hello-unfree"},{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/qvwhhrny6ysyslncd8n0njhwwa8pijgk-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/lpdflm12kq0pqzwzwghrab7wwngad9li-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["unstable"],"scrape_date":"2025-05-10T04:53:42.416597Z","cache_uri":null,"install_id":"hello-unfree"},{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/akkxyhi0v0iqrxnlf5hc687haq02i4b3-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/jfj3fnjibznbjk8nabbwagsdjhrxyk8z-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["unstable"],"scrape_date":"2025-05-10T05:23:21.028663Z","cache_uri":null,"install_id":"hello-unfree"},{"catalog":"nixpkgs","attr_path":"hello-unfree","pkg_path":"hello-unfree","derivation":"/nix/store/9131j9dhb1i6hxrqnbh129lkw9x2zcfp-example-unfree-package-1.0.drv","name":"example-unfree-package-1.0","pname":"hello-unfree","version":"1.0","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/avy99n2fk5xd9r463mwwsww6m03cj3p6-example-unfree-package-1.0"}],"outputs_to_install":["out"],"description":"Example package with unfree license (for testing)","license":"Unfree","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":true,"missing_builds":true,"stabilities":["unstable"],"scrape_date":"2025-05-10T05:58:24.983519Z","cache_uri":null,"install_id":"hello-unfree"}],"messages":[],"complete":true},"messages":[]}]}'
