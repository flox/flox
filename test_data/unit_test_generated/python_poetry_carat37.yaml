when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"python3","install_id":"python3","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"],"version":"^3.7"}],"name":"python3"}]}'
then:
  status: 200
  header:
  - name: date
    value: Mon, 19 May 2025 10:13:13 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3663'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: Kz2Y1hwSIAMESaQ=
  body: '{"items":[{"name":"python3","page":{"page":799423,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/3x37mwdjllp6yrbj1xrxz0va7x30yamb-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/vfdk6q81hdjqjfiqz8f92hibdck3kmn6-python3-3.12.10"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e","rev":"adaa24fbf46737f3f1b5497bf64bae750f82942e","rev_count":799423,"rev_date":"2025-05-13T23:30:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-05-16T04:21:42.546153Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/gi0807cssb19h0b9qspxl0bj77schyyq-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/gbml27jdc722w5srjw6mw28v08wi0xbf-python3-3.12.10"},{"name":"debug","store_path":"/nix/store/m46lakqznizbkk9byf32320994x2s8sg-python3-3.12.10-debug"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e","rev":"adaa24fbf46737f3f1b5497bf64bae750f82942e","rev_count":799423,"rev_date":"2025-05-13T23:30:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-05-16T04:40:35.311490Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/8vfp1d11i5izsk9yc7yd1d9ymkpff01z-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/ixbf5xsmxbscjhb8j84slnfa23p2cq00-python3-3.12.10"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e","rev":"adaa24fbf46737f3f1b5497bf64bae750f82942e","rev_count":799423,"rev_date":"2025-05-13T23:30:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-05-16T04:56:53.362159Z","cache_uri":null,"install_id":"python3"},{"catalog":"nixpkgs","attr_path":"python3","pkg_path":"python3","derivation":"/nix/store/6aywhjhky7j7h1fp8pj3z8dqy4aiggsq-python3-3.12.10.drv","name":"python3-3.12.10","pname":"python3","version":"3.12.10","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/kjvgj2n3yn70hmjifg6y0bk9m4rf7jba-python3-3.12.10"},{"name":"debug","store_path":"/nix/store/rn34clh8kms8n4vwavyca0ls9l90j8d1-python3-3.12.10-debug"}],"outputs_to_install":["out"],"description":"High-level dynamically-typed programming language","license":"Python-2.0","locked_url":"https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e","rev":"adaa24fbf46737f3f1b5497bf64bae750f82942e","rev_count":799423,"rev_date":"2025-05-13T23:30:50Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["staging","unstable"],"scrape_date":"2025-05-16T05:19:02.834270Z","cache_uri":null,"install_id":"python3"}],"messages":[],"complete":true},"messages":[]}]}'
---
when:
  path: /api/v1/catalog/resolve
  method: POST
  body: '{"items":[{"descriptors":[{"allow_broken":null,"allow_insecure":null,"allow_missing_builds":null,"allow_pre_releases":null,"allow_unfree":null,"attr_path":"poetry","install_id":"poetry","systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"]}],"name":"poetry"}]}'
then:
  status: 200
  header:
  - name: date
    value: Mon, 19 May 2025 10:13:14 GMT
  - name: content-type
    value: application/json
  - name: content-length
    value: '3854'
  - name: server
    value: uvicorn
  - name: apigw-requestid
    value: Kz2ZFhr-IAMES9A=
  body: '{"items":[{"name":"poetry","page":{"page":796699,"url":"","packages":[{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/zycf6zpjx8ns5mmk8c91acxhwzl1fszf-python3.12-poetry-2.1.2.drv","name":"poetry-2.1.2","pname":"poetry","version":"2.1.2","system":"aarch64-darwin","outputs":[{"name":"out","store_path":"/nix/store/3k3xcfhaqgk51hrc86mfrwcs4l8hp55d-python3.12-poetry-2.1.2"},{"name":"dist","store_path":"/nix/store/2y3z4a09hxgcg4yjnsmhsg2z07i29wcz-python3.12-poetry-2.1.2-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-10T04:25:18.939808Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/z9ns6c9fmnphf726kga6cz8kfrn58vr0-python3.12-poetry-2.1.2.drv","name":"poetry-2.1.2","pname":"poetry","version":"2.1.2","system":"aarch64-linux","outputs":[{"name":"out","store_path":"/nix/store/pignydadpij4fql1pbig2yxhhsvlj2gy-python3.12-poetry-2.1.2"},{"name":"dist","store_path":"/nix/store/ynsndjvqjxb3xp8pji8fca86y474f65b-python3.12-poetry-2.1.2-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-10T04:54:00.651891Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/yjd6c21gnwins3w3whr46kz4gwz5k2k4-python3.12-poetry-2.1.2.drv","name":"poetry-2.1.2","pname":"poetry","version":"2.1.2","system":"x86_64-darwin","outputs":[{"name":"out","store_path":"/nix/store/js02yzgnlxmx63hcs6mys3x2ya5qqnza-python3.12-poetry-2.1.2"},{"name":"dist","store_path":"/nix/store/45sxjf93llckziii8215al8b6y7i47ch-python3.12-poetry-2.1.2-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-10T05:23:28.407347Z","cache_uri":null,"install_id":"poetry"},{"catalog":"nixpkgs","attr_path":"poetry","pkg_path":"poetry","derivation":"/nix/store/cj5axpr6c5vg5jg9dfic851p4azz273w-python3.12-poetry-2.1.2.drv","name":"poetry-2.1.2","pname":"poetry","version":"2.1.2","system":"x86_64-linux","outputs":[{"name":"out","store_path":"/nix/store/i7h0r4r3ml91dn4m7wzr5h63c4cp9lq7-python3.12-poetry-2.1.2"},{"name":"dist","store_path":"/nix/store/91ca1k5db9m714rk5ppzmpcbqrc537az-python3.12-poetry-2.1.2-dist"}],"outputs_to_install":["out"],"description":"Python dependency management and packaging made easy","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=dda3dcd3fe03e991015e9a74b22d35950f264a54","rev":"dda3dcd3fe03e991015e9a74b22d35950f264a54","rev_count":796699,"rev_date":"2025-05-08T00:12:27Z","broken":false,"insecure":false,"unfree":false,"missing_builds":false,"stabilities":["unstable"],"scrape_date":"2025-05-10T05:58:45.718277Z","cache_uri":null,"install_id":"poetry"}],"messages":[],"complete":true},"messages":[]}]}'
